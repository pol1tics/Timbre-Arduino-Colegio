<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Timbre Autom谩tico con Arduino | Proyecto Escolar</title>
    <style>
        /* ----------------------- CSS: Estilos de la P谩gina ----------------------- */
        :root {
            --color-principal: #3498db; /* Azul Colegio */
            --color-secundario: #2ecc71; /* Verde Tecnolog铆a */
            --color-fondo: #ecf0f1;
            --color-texto: #2c3e50;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 0;
            background-color: var(--color-fondo);
            color: var(--color-texto);
            line-height: 1.6;
        }

        .container {
            max-width: 900px;
            margin: 30px auto;
            padding: 20px;
            background-color: white;
            border-radius: 12px;
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.1);
        }

        header {
            text-align: center;
            padding: 20px 0;
            border-bottom: 3px solid var(--color-principal);
            margin-bottom: 20px;
        }

        header h1 {
            color: var(--color-principal);
            font-size: 2.2em;
            margin-bottom: 5px;
        }

        header p {
            color: var(--color-secundario);
            font-size: 1.1em;
            font-weight: 600;
        }

        section {
            margin-bottom: 30px;
        }

        h2 {
            color: var(--color-secundario);
            border-bottom: 2px solid #ddd;
            padding-bottom: 5px;
            margin-top: 0;
        }

        /* Estilos de la tabla de componentes */
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            font-size: 0.9em;
            text-align: left;
        }

        th, td {
            padding: 12px 15px;
            border: 1px solid #ddd;
        }

        th {
            background-color: var(--color-principal);
            color: white;
            font-weight: 700;
        }

        tr:nth-child(even) {
            background-color: #f8f8f8;
        }
        
        /* Estilos para el bloque de c贸digo */
        .codigo-bloque {
            background-color: #f4f4f4;
            border: 1px solid #ccc;
            border-radius: 8px;
            padding: 15px;
            margin: 20px 0;
            overflow-x: auto; /* Permite desplazamiento horizontal en pantallas peque帽as */
        }
        
        pre {
            margin: 0;
        }

        code {
            font-family: 'Consolas', 'Monaco', monospace;
            font-size: 0.85em;
            white-space: pre-wrap; /* Mantiene saltos de l铆nea y formato */
            display: block;
        }

        .explicacion-simple {
            background-color: #e8f6f3; /* Fondo de explicaci贸n */
            padding: 15px;
            border-radius: 8px;
            border-left: 5px solid var(--color-secundario);
        }
        .explicacion-simple p {
            margin: 0 0 10px 0;
        }

    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1> Timbre Escolar Autom谩tico y Alarma de Emergencia con Arduino</h1>
            <p>Proyecto de Automatizaci贸n y Seguridad Escolar | Por: Juan Diego</p>
        </header>

        <section>
            <h2> Resumen e Impacto</h2>
            <p>Este sistema de timbre inteligente utiliza una placa **Arduino** para controlar los horarios con precisi贸n. El objetivo es eliminar los retrasos del timbre manual para mejorar la **puntualidad** y, fundamentalmente, a帽adir un bot贸n de **emergencia** para alertar r谩pidamente a toda la comunidad educativa. 隆Demostramos que la electr贸nica puede solucionar problemas reales!</p>
        </section>

        <section>
            <h2>锔 Componentes Clave del Sistema</h2>
            <p>El proyecto es viable gracias a estos m贸dulos electr贸nicos:</p>
            <table>
                <thead>
                    <tr>
                        <th>Componente</th>
                        <th>Funci贸n Principal</th>
                        <th>Rol en el Proyecto (Explicaci贸n Simple)</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>**Arduino UNO**</td>
                        <td>Microcontrolador</td>
                        <td>Es el **cerebro** del proyecto. Ejecuta las instrucciones (el c贸digo) para controlar todo.</td>
                    </tr>
                    <tr>
                        <td>**M贸dulo RTC DS3231**</td>
                        <td>Reloj en Tiempo Real</td>
                        <td>Mantiene la **hora exacta** siempre, incluso si se va la luz, para garantizar la precisi贸n.</td>
                    </tr>
                    <tr>
                        <td>**M贸dulo Rel茅**</td>
                        <td>Interruptor El茅ctrico</td>
                        <td>Permite que el Arduino active (encienda) la **campana o sirena** del colegio a la hora precisa.</td>
                    </tr>
                    <tr>
                        <td>**Pantalla LCD I2C**</td>
                        <td>Interfaz Visual</td>
                        <td>Muestra la **hora actual** y el estado del sistema ("Esperando" o "Sonando").</td>
                    </tr>
                    <tr>
                        <td>**Microinterruptor**</td>
                        <td>Alarma Manual</td>
                        <td>El **bot贸n de emergencia** que activa la alarma sonora en caso de cualquier riesgo.</td>
                    </tr>
                </tbody>
            </table>
        </section>

        <section>
            <h2> C贸digo Fuente (Sketch de Arduino)</h2>
            <p>Este c贸digo est谩 cargado en el Arduino. Lo dividimos en bloques para entender su l贸gica.</p>

            <h3>1. Librer铆as y Conexiones</h3>
            <p>Se define el hardware que se utilizar谩, como el Pin 8 para el Rel茅 y el Pin 2 para el bot贸n de Alarma.</p>
            <div class="codigo-bloque">
<pre><code>
// ---------------------- 1. LIBRERAS Y DEFINICIONES ----------------------
#include &lt;Wire.h&gt; 
#include &lt;LiquidCrystal_I2C.h&gt; 
#include "RTClib.h" 

// Definiciones de hardware
#define PIN_RELE 8           // SALIDA al Timbre
#define PIN_ALARMA_MANUAL 2  // ENTRADA del bot贸n de Emergencia

// Inicializaci贸n de objetos
LiquidCrystal_I2C lcd(0x27, 16, 2); 
RTC_DS3231 rtc;                     

// Horarios Programados (Hora, Minuto)
int horarios_timbre[][2] = {
    {7, 0},    // Entrada
    {9, 30},   // Receso
    {12, 30}   // Salida
};
const int NUM_TIMBRES = sizeof(horarios_timbre) / sizeof(horarios_timbre[0]);
</code></pre>
            </div>

            <h3>2. Funci贸n Principal: `loop()` (El Motor del Proyecto)</h3>
            <p>El Arduino repite esta parte sin parar. Aqu铆 se toman las decisiones.</p>
            <div class="codigo-bloque">
<pre><code>
// ---------------------- 2. EL MOTOR DEL PROYECTO (LOOP) ----------------------
void loop() {
    DateTime ahora = rtc.now(); // Pide la hora actual
    int horaActual = ahora.hour();
    int minutoActual = ahora.minute();

    // --- A. REVISIN DE ALARMA MANUAL (Prioridad Alta) ---
    if (digitalRead(PIN_ALARMA_MANUAL) == LOW) {
        activarTimbre(4); // Toca el timbre por 4 segundos para la ALARMA
        
        // Muestra la alerta
        lcd.clear();
        lcd.print("!!! ALARMA ACTIVA !!!");
        lcd.setCursor(0, 1);
        lcd.print("ALARMA MANUAL (4s)");
        delay(100);
    }

    // --- B. REVISIN DE HORARIO AUTOMTICO ---
    else {
        bool timbreProgramado = false;
        // Recorre la lista de horarios para ver si ya es hora
        for (int i = 0; i < NUM_TIMBRES; i++) {
            if (horaActual == horarios_timbre[i][0] && minutoActual == horarios_timbre[i][1]) {
                activarTimbre(2); // Toca el timbre por 2 segundos (rutina normal)
                timbreProgramado = true;
                break; 
            }
        }

        // --- C. MOSTRAR LA HORA EN PANTALLA ---
        if (!timbreProgramado) {
            lcd.setCursor(0, 0);
            lcd.print("Hora: ");
            if (horaActual < 10) lcd.print("0");
            lcd.print(horaActual);
            lcd.print(":");
            if (minutoActual < 10) lcd.print("0");
            lcd.print(minutoActual);

            lcd.setCursor(0, 1);
            lcd.print("Estado: Esperando");
        }
    }
    
    delay(900); // Pausa de 0.9 segundos
}
</code></pre>
            </div>
            
            <h3>3. Funci贸n Auxiliar: `activarTimbre()`</h3>
            <p>Esta es la instrucci贸n que el Arduino ejecuta para encender el Rel茅.</p>
            <div class="codigo-bloque">
<pre><code>
// ---------------------- 3. FUNCIN AUXILIAR ----------------------
void activarTimbre(int duracionSegundos) {
    digitalWrite(PIN_RELE, HIGH); // Activar Rel茅 (Timbre ENCIENDE)
    
    // Muestra que est谩 sonando
    lcd.clear();
    lcd.print("!! TIMBRE SONANDO !!");
    lcd.setCursor(0, 1);
    lcd.print("Duracion: ");
    lcd.print(duracionSegundos);
    lcd.print("s");
    
    delay(duracionSegundos * 1000); // Espera el tiempo de la duraci贸n
    
    digitalWrite(PIN_RELE, LOW); // Desactivar Rel茅 (Timbre APAGA)
}
</code></pre>
            </div>
        </section>

        <section>
            <h2> 驴C贸mo Funciona la Magia? (Analog铆a Simple)</h2>
            <div class="explicacion-simple">
                <p>El Arduino act煤a como un **vigilante** o **controlador** muy r谩pido que sigue un protocolo simple:</p>
                <ul>
                    <li>**"驴Qu茅 hora es?"** El vigilante pregunta la hora al **RTC (Reloj)**.</li>
                    <li>**"驴Alguien presion贸 el bot贸n rojo?"** El vigilante revisa el **Microinterruptor (Alarma Manual)**. Si est谩 presionado, 隆suena la alarma inmediatamente, sin importar la hora!</li>
                    <li>**"驴Toca timbre autom谩tico?"** Si no hay alarma, revisa su **lista de horarios** programados.</li>
                    <li>**"隆Activar!"** Si coincide la hora, le da la orden al **Rel茅** de encender y apagar el timbre real.</li>
                    <li>**"Todo OK."** Si no hay nada que hacer, simplemente muestra la hora en el **LCD**.</li>
                </ul>
            </div>
        </section>
        
        <footer style="text-align: center; margin-top: 30px; padding-top: 15px; border-top: 1px solid #ddd;">
            <p style="font-size: 0.9em; color: #7f8c8d;">Proyecto de Tecnolog铆a y Electr贸nica - Fomentando el Aprendizaje Pr谩ctico.</p>
        </footer>
    </div>
</body>
</html>